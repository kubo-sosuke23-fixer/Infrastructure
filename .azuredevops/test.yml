parameters:
  - name: connection
    type: string

steps:
  - script: echo ${{ parameters.connection }}
  - task: AzureCLI@2
    inputs:
      connectedServiceNameARM: ${{ parameters.connection }}
      failOnStandardError: false
      scriptType: bash
      scriptLocation: inlineScript
      addSpnToEnvironment: true
      inlineScript: |
        set -e

        # サービスコネクションの情報からSubscriptionName SubscriptionIdを取得
        subscriptionId=$(az account show --query id -o tsv)

        echo $subscriptionId

        variables=$(TEST_VARIABLES)

        echo $variables

        if [ ${{ variables.v2Check }} == true ]; then
          echo truedesu
        else
          echo falsedesu
        fi
