parameters:
  - name: connection
    type: string

steps:
  - task: AzureCLI@2
    inputs:
      azureSubsription: ${{ parameters.connection }}
      failOnStandardError: false
      scriptType: bash
      scriptLocation: inlineScript
      addSpnToEnvironment: true
      inlineScript: |
        set -e

        # サービスコネクションの情報からSubscriptionName SubscriptionIdを取得
        subscriptionId=$(az account show --query id -o tsv)

        echo $subscriptionId
